{% extends "base.html.twig" %}
{% block title %}
{{ parent() }}
- Création d'utilisateur
{% endblock %}
{% block contenu %}
<h1 class="text-center">Créer un utilisateur</h1>

<form
id="formulaire" method="POST" action="index.php?page=insertUser" class=" m-5 p-4 border rounded bg-light">

<!-- Nom -->
<div class="mb-3">
<label for="nom" class="form-label">Nom</label>
<input type="text" id="nom" name="nom" class="form-control" required>
</div>

<!-- Prénom -->
<div class="mb-3">
<label for="prenom" class="form-label">Prénom</label>
<input type="text" id="prenom" name="pNom" class="form-control" required>
</div>

<!-- E-mail -->
<div class="mb-3">
<label for="inputEmail" class="form-label">E-mail</label>
<input type="email" id="inputEmail" name="mail" class="form-control" required>
</div>

<!-- Nom d'utilisateur généré -->
<div class="mb-3">
<label for="nomUtilisateurAffichage" class="form-label">Nom d'utilisateur</label>
<input type="text" id="nom_utilisateur" name="nom_utilisateur" class="form-control" required readonly>
<p id="nomUtilisateurAffichage" class="text-muted mt-2"></p>
</div>

<!-- Mot de passe -->
<div class="mb-3">
<label for="inputPassword" class="form-label">Mot de passe</label>
<input type="text" id="inputPassword" name="mdp" class="form-control" required readonly>
<button type="button" id="genererMotDePasse" class="btn btn-secondary mt-2">Générer un autre mot de passe</button>
<button type="button" id="togglePassword" class="btn btn-outline-secondary mt-2">Cacher</button>
</div>

<!-- Rôle -->
<div class="mb-3">
<label for="role" class="form-label">Rôle</label>
<select id="role" name="id_role" class="form-select" required>
{% for role in roles %}
<option value="{{ role.id_rôle }}">{{ role.libelle_rôle }}</option>
{% endfor %}
</select>
</div>

<div class="mb-3">
<label for="appli" class="form-label">Applications</label>
<div id="appli">
{% for appli in applis %}
<div class="form-check">
<input class="form-check-input" type="checkbox" id="appli-{{ appli.id_appli }}" name="id_appli[]" value="{{ appli.id_appli }}">
<label class="form-check-label" for="appli-{{ appli.id_appli }}">
{{ appli.libelle_appli }}
</label>
</div>
{% endfor %}
</div>
<small class="text-muted">Cochez une ou plusieurs applications.</small>
</div>


<!-- Bouton de soumission -->
<div class="mt-3">
<p id="champsNonRemplis" class="text-danger"></p>
<button type="submit" class="btn btn-secondary mt-2">Créer l'utilisateur</button>
</div>
</form>
{% endblock %}